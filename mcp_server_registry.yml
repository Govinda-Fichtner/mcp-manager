# MCP Server Registry
# Schema version: 2.0 (evolved from MacbookSetup patterns)
# See CLAUDE.md for server type taxonomy and extension patterns

servers:
  github:
    name: "GitHub MCP Server"
    server_type: "api_based"  # Requires API authentication
    description: "GitHub repository management, issues, pull requests, and code search"
    category: "development"

    source:
      type: "registry"
      image: "ghcr.io/github/github-mcp-server:latest"

    environment_variables:
      - "GITHUB_PERSONAL_ACCESS_TOKEN"

    docker:
      network_mode: "host"

    startup_timeout: 10

  filesystem:
    name: "Filesystem MCP Server"
    server_type: "mount_based"  # Requires volume mounts
    description: "Secure file system access with directory restrictions"
    category: "storage"

    source:
      type: "registry"
      image: "mcp/filesystem:latest"

    environment_variables:
      - "ALLOWED_DIRECTORIES"

    volumes:
      - "${ALLOWED_DIRECTORIES}:/project"

    docker:
      network_mode: "host"

    startup_timeout: 5

  obsidian:
    name: "Obsidian MCP Server"
    server_type: "api_based"  # Uses Obsidian Local REST API
    description: "Comprehensive Obsidian vault management with tools for reading, writing, searching, and managing notes, tags, and frontmatter"
    category: "knowledge"

    source:
      type: "repository"  # Clone and build from repository
      repository: "https://github.com/cyanheads/obsidian-mcp-server.git"
      image: "local/obsidian-mcp-server:latest"
      build_context: "."

    environment_variables:
      - "OBSIDIAN_API_KEY"
      - "OBSIDIAN_BASE_URL"
      - "OBSIDIAN_VERIFY_SSL"
      - "OBSIDIAN_ENABLE_CACHE"

    docker:
      network_mode: "host"

    startup_timeout: 20  # Extended for cache building when OBSIDIAN_ENABLE_CACHE=true

  circleci:
    name: "CircleCI MCP Server"
    server_type: "api_based"  # Requires API token authentication
    description: "CircleCI pipeline monitoring and management"
    category: "cicd"

    source:
      type: "repository"  # Clone and build from repository
      repository: "https://github.com/CircleCI-Public/mcp-server-circleci.git"
      image: "local/mcp-server-circleci:latest"
      build_context: "."

    environment_variables:
      - "CIRCLECI_TOKEN"

    docker:
      network_mode: "host"

    startup_timeout: 10

# Global configuration
global:
  build_directory: "./mcp_builds"
  network_name: "mcp-network"
  default_timeout: 10
